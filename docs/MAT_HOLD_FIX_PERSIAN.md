# Ø±ÙØ¹ Ù…Ø´Ú©Ù„ Mat Hold Pattern - Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ú©Ø§Ù…Ù„

## ğŸ” Ù…Ø´Ú©Ù„ Ø§ØµÙ„ÛŒ

Ø§Ù„Ú¯ÙˆÛŒ Mat Hold Ù‡ÛŒÚ† detection Ù†Ø¯Ø§Ø´Øª Ø¯Ø± Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ ÙˆØ§Ù‚Ø¹ÛŒ BTC. Ø¯Ù„ÛŒÙ„ Ø§ÛŒÙ† Ø¨ÙˆØ¯ Ú©Ù‡:

1. **Ù¾Ø§Ø±Ø§Ù…ØªØ± `penetration` Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù†Ø´Ø¯Ù‡ Ø¨ÙˆØ¯**
2. **TALib Ø¨Ù‡ ØµÙˆØ±Øª Ù¾ÛŒØ´â€ŒÙØ±Ø¶ Ø§Ø² Ù…Ù‚Ø¯Ø§Ø± 0.5 (50%) Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ø¯**
3. **Ø§ÛŒÙ† Ù…Ù‚Ø¯Ø§Ø± Ø¨Ø³ÛŒØ§Ø± Ø³Ø®Øªâ€ŒÚ¯ÛŒØ±Ø§Ù†Ù‡ Ø§Ø³Øª** Ùˆ Ø§Ù„Ú¯Ùˆ Ø±Ø§ Ø¨Ø³ÛŒØ§Ø± Ù†Ø§Ø¯Ø± Ù…ÛŒâ€ŒÚ©Ù†Ø¯

## âœ… Ø±Ø§Ù‡â€ŒØ­Ù„

### 1. Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ù¾Ø§Ø±Ø§Ù…ØªØ± Penetration

ÙØ§ÛŒÙ„ `mat_hold.py` Ø¨Ù‡ Ø±ÙˆØ² Ø´Ø¯ Ùˆ Ø­Ø§Ù„Ø§ Ù¾Ø§Ø±Ø§Ù…ØªØ± `penetration` Ø±Ø§ Ù…ÛŒâ€ŒÙ¾Ø°ÛŒØ±Ø¯:

```python
# Ø±ÙˆØ´ 1: Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ù…Ù‚Ø¯Ø§Ø± Ù¾ÛŒØ´â€ŒÙØ±Ø¶
detector = MatHoldPattern()  # penetration=0.3

# Ø±ÙˆØ´ 2: ØªÙ†Ø¸ÛŒÙ… Ù…Ø³ØªÙ‚ÛŒÙ… Ù¾Ø§Ø±Ø§Ù…ØªØ±
detector = MatHoldPattern(penetration=0.25)

# Ø±ÙˆØ´ 3: Ø§Ø² Ø·Ø±ÛŒÙ‚ config dictionary
config = {'mat_hold_penetration': 0.3}
detector = MatHoldPattern(config=config)
```

### 2. Ù…Ù‚Ø¯Ø§Ø± Ù¾ÛŒØ´â€ŒÙØ±Ø¶ Ø¬Ø¯ÛŒØ¯: 0.3 (30%)

Ù…Ù‚Ø¯Ø§Ø± Ù¾ÛŒØ´â€ŒÙØ±Ø¶ Ø§Ø² 0.5 Ø¨Ù‡ 0.3 Ú©Ø§Ù‡Ø´ ÛŒØ§ÙØª Ú©Ù‡ Ø¨Ø§Ø¹Ø« Ù…ÛŒâ€ŒØ´ÙˆØ¯:
- âœ… Detections Ø¨ÛŒØ´ØªØ±
- âœ… Ø§Ù„Ú¯Ùˆ Ø¯Ø± Ø¯Ø§Ø¯Ù‡ ÙˆØ§Ù‚Ø¹ÛŒ Ù¾ÛŒØ¯Ø§ Ø´ÙˆØ¯
- âœ… ØªØ¹Ø§Ø¯Ù„ Ø¨ÛŒÙ† Ø¯Ù‚Øª Ùˆ ÙØ±Ø§ÙˆØ§Ù†ÛŒ

## ğŸ“Š Ø¯Ø±Ú© Ù¾Ø§Ø±Ø§Ù…ØªØ± Penetration

```
Penetration = Ø¯Ø±ØµØ¯ Ù†ÙÙˆØ° ÛŒÚ© Ú©Ù†Ø¯Ù„ Ø¯Ø± Ú©Ù†Ø¯Ù„ Ø¯ÛŒÚ¯Ø±

Ù…Ù‚Ø¯Ø§Ø± Ù¾Ø§ÛŒÛŒÙ† (0.1-0.3):
  âœ… Detections Ø¨ÛŒØ´ØªØ±
  âš ï¸  Ø¯Ù‚Øª Ú©Ù…ØªØ±

Ù…Ù‚Ø¯Ø§Ø± Ù…ØªÙˆØ³Ø· (0.3-0.5):
  âœ… ØªØ¹Ø§Ø¯Ù„ Ø®ÙˆØ¨
  âœ… ØªÙˆØµÛŒÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯

Ù…Ù‚Ø¯Ø§Ø± Ø¨Ø§Ù„Ø§ (0.5-0.7):
  âœ… Ø¯Ù‚Øª Ø¨ÛŒØ´ØªØ±
  âš ï¸  Detections Ø¨Ø³ÛŒØ§Ø± Ú©Ù…
```

## ğŸ§ª ØªØ³Øª Ø¨Ø§ Ù…Ù‚Ø§Ø¯ÛŒØ± Ù…Ø®ØªÙ„Ù

### Ø§Ø³Ú©Ø±ÛŒÙ¾Øª ØªØ³Øª Ø¬Ø¯ÛŒØ¯

ÛŒÚ© Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø¬Ø¯ÛŒØ¯ Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯ Ø¨Ø±Ø§ÛŒ ØªØ³Øª Ù…Ù‚Ø§Ø¯ÛŒØ± Ù…Ø®ØªÙ„Ù:

```bash
python talib-test/test_mathold_penetration.py
```

Ø§ÛŒÙ† Ø§Ø³Ú©Ø±ÛŒÙ¾Øª:
- âœ… ØªÙ…Ø§Ù… ØªØ§ÛŒÙ… ÙØ±ÛŒÙ…â€ŒÙ‡Ø§ Ø±Ø§ ØªØ³Øª Ù…ÛŒâ€ŒÚ©Ù†Ø¯ (5m, 15m, 1h, 4h)
- âœ… Ù…Ù‚Ø§Ø¯ÛŒØ± Ù…Ø®ØªÙ„Ù penetration Ø±Ø§ Ø§Ù…ØªØ­Ø§Ù† Ù…ÛŒâ€ŒÚ©Ù†Ø¯
- âœ… Ø¨Ù‡ØªØ±ÛŒÙ† Ù…Ù‚Ø¯Ø§Ø± Ø±Ø§ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯

### Ù†Ø­ÙˆÙ‡ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø¯Ø± Ú©Ø¯ Ø´Ù…Ø§

#### Ø±ÙˆØ´ 1: Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ù…Ù‚Ø¯Ø§Ø± Ù¾ÛŒØ´â€ŒÙØ±Ø¶ (ØªÙˆØµÛŒÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯)
```python
from signal_generation.analyzers.patterns.candlestick.mat_hold import MatHoldPattern

# Ù…Ù‚Ø¯Ø§Ø± Ù¾ÛŒØ´â€ŒÙØ±Ø¶ 0.3 Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯
detector = MatHoldPattern()

is_detected = detector.detect(df)
```

#### Ø±ÙˆØ´ 2: ØªÙ†Ø¸ÛŒÙ… Ø¯Ø³ØªÛŒ
```python
# Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ù…Ù‚Ø¯Ø§Ø± Ø³ÙØ§Ø±Ø´ÛŒ
detector = MatHoldPattern(penetration=0.25)  # More lenient
```

#### Ø±ÙˆØ´ 3: ØªØ³Øª Ù…Ù‚Ø§Ø¯ÛŒØ± Ù…Ø®ØªÙ„Ù
```python
import pandas as pd

# Ø¯Ø§Ø¯Ù‡ Ø®ÙˆØ¯ Ø±Ø§ Ù„ÙˆØ¯ Ú©Ù†ÛŒØ¯
df = pd.read_csv('your_data.csv')

# ØªØ³Øª Ø¨Ø§ Ù…Ù‚Ø§Ø¯ÛŒØ± Ù…Ø®ØªÙ„Ù
penetration_values = [0.2, 0.3, 0.4, 0.5]

for pen in penetration_values:
    detector = MatHoldPattern(penetration=pen)
    is_detected = detector.detect(df)

    print(f"Penetration {pen}: {'âœ… Detected' if is_detected else 'âŒ Not detected'}")
```

## ğŸ“ ØªØºÛŒÛŒØ±Ø§Øª Ø¯Ø± Ú©Ø¯

### Ù‚Ø¨Ù„ (Ù†Ø³Ø®Ù‡ 1.0.0):
```python
result = talib.CDLMATHOLD(
    df[open_col].values,
    df[high_col].values,
    df[low_col].values,
    df[close_col].values
)
# Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ù…Ù‚Ø¯Ø§Ø± Ù¾ÛŒØ´â€ŒÙØ±Ø¶ TALib (0.5)
```

### Ø¨Ø¹Ø¯ (Ù†Ø³Ø®Ù‡ 1.1.0):
```python
result = talib.CDLMATHOLD(
    df[open_col].values,
    df[high_col].values,
    df[low_col].values,
    df[close_col].values,
    penetration=self.penetration  # Ù…Ù‚Ø¯Ø§Ø± Ù‚Ø§Ø¨Ù„ ØªÙ†Ø¸ÛŒÙ… (Ù¾ÛŒØ´â€ŒÙØ±Ø¶: 0.3)
)
```

## ğŸ¯ ØªÙˆØµÛŒÙ‡â€ŒÙ‡Ø§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡

### Ø¨Ø±Ø§ÛŒ Ø¨Ø§Ø²Ø§Ø±Ù‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù:

#### Ø¨Ø§Ø²Ø§Ø±Ù‡Ø§ÛŒ Volatile (Bitcoin, Altcoins):
```python
detector = MatHoldPattern(penetration=0.25)  # Ú©Ù…ÛŒ Ø³Ù‡Ù„â€ŒÚ¯ÛŒØ±Ø§Ù†Ù‡â€ŒØªØ±
```

#### Ø¨Ø§Ø²Ø§Ø±Ù‡Ø§ÛŒ Ú©Ù… Ù†ÙˆØ³Ø§Ù† (Stablecoins, Forex):
```python
detector = MatHoldPattern(penetration=0.35)  # Ú©Ù…ÛŒ Ø³Ø®Øªâ€ŒÚ¯ÛŒØ±Ø§Ù†Ù‡â€ŒØªØ±
```

#### Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø¹Ù…ÙˆÙ…ÛŒ (ØªÙˆØµÛŒÙ‡):
```python
detector = MatHoldPattern(penetration=0.3)  # ÛŒØ§ Ø¨Ø¯ÙˆÙ† Ù¾Ø§Ø±Ø§Ù…ØªØ±
```

## âš™ï¸ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù¾ÛŒØ´Ø±ÙØªÙ‡

### ØªØ±Ú©ÛŒØ¨ Ø¨Ø§ Ø³Ø§ÛŒØ± Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§:
```python
detector = MatHoldPattern(
    lookback_window=20,      # Ø¨Ø±Ø±Ø³ÛŒ 20 Ú©Ù†Ø¯Ù„ Ø§Ø®ÛŒØ±
    penetration=0.3,         # Ø¯Ø±ØµØ¯ Ù†ÙÙˆØ°
    recency_multipliers=[1.0, 0.9, 0.8, 0.7, ...]  # ÙˆØ²Ù†â€ŒØ¯Ù‡ÛŒ Ø¨Ù‡ ØªØ§Ø²Ú¯ÛŒ
)
```

## ğŸ› Ø¹ÛŒØ¨â€ŒÛŒØ§Ø¨ÛŒ

### Ø§Ú¯Ø± Ù‡Ù†ÙˆØ² detection Ù†Ø¯Ø§Ø±ÛŒØ¯:

1. **Ù¾Ø§Ø±Ø§Ù…ØªØ± Ø±Ø§ Ú©Ø§Ù‡Ø´ Ø¯Ù‡ÛŒØ¯:**
   ```python
   detector = MatHoldPattern(penetration=0.2)
   ```

2. **Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯ Ú©Ù‡ Ø¯Ø§Ø¯Ù‡ Ú©Ø§ÙÛŒ Ø¯Ø§Ø±ÛŒØ¯:**
   ```python
   if len(df) < 17:
       print("âŒ Ø­Ø¯Ø§Ù‚Ù„ 17 Ú©Ù†Ø¯Ù„ Ù†ÛŒØ§Ø² Ø§Ø³Øª")
   ```

3. **ØªØ³Øª Ø¨Ø§ TALib Ù…Ø³ØªÙ‚ÛŒÙ…:**
   ```python
   import talib
   result = talib.CDLMATHOLD(df['open'], df['high'], df['low'], df['close'], penetration=0.2)
   print(f"Detections: {(result != 0).sum()}")
   ```

## ğŸ“š Ù…Ù†Ø§Ø¨Ø¹ Ø¨ÛŒØ´ØªØ±

- **TA-Lib Documentation**: [ØªØ§Ø¨Ø¹ CDLMATHOLD](http://ta-lib.org/)
- **Ø§Ù„Ú¯ÙˆÛŒ Mat Hold**: Ø§Ù„Ú¯ÙˆÛŒ Ø§Ø¯Ø§Ù…Ù‡â€ŒØ¯Ù‡Ù†Ø¯Ù‡ ØµØ¹ÙˆØ¯ÛŒ 5 Ú©Ù†Ø¯Ù„ÛŒ
- **ØªØ³Øª Ø®ÙˆØ¯Ú©Ø§Ø±**: `test_mathold_penetration.py`

## âœ¨ Ø®Ù„Ø§ØµÙ‡ ØªØºÛŒÛŒØ±Ø§Øª

| Ø¢ÛŒØªÙ… | Ù‚Ø¨Ù„ | Ø¨Ø¹Ø¯ |
|------|-----|-----|
| Ù†Ø³Ø®Ù‡ | 1.0.0 | 1.1.1 |
| Penetration Ù¾ÛŒØ´â€ŒÙØ±Ø¶ | 0.5 (TALib) | 0.3 (Ù‚Ø§Ø¨Ù„ ØªÙ†Ø¸ÛŒÙ…) |
| Detections Ø¯Ø± BTC | 0 âŒ | Ù…ØªØ¹Ø¯Ø¯ âœ… |
| Ù‚Ø§Ø¨Ù„ÛŒØª ØªÙ†Ø¸ÛŒÙ… | âŒ | âœ… |
| Ø³Ø§Ø²Ú¯Ø§Ø±ÛŒ Ø¨Ø§ BasePattern | âŒ (v1.1.0) | âœ… (v1.1.1) |

## ğŸ’¡ Ù†Ú©Ø§Øª Ù…Ù‡Ù…

1. **Ø§Ù„Ú¯ÙˆÛŒ Mat Hold Ù‡Ù…Ú†Ù†Ø§Ù† Ù†Ø§Ø¯Ø± Ø§Ø³Øª** - Ø­ØªÛŒ Ø¨Ø§ penetration Ù¾Ø§ÛŒÛŒÙ†â€ŒØªØ±
2. **Ø§ÛŒÙ† ÛŒÚ© Ø§Ù„Ú¯ÙˆÛŒ 5 Ú©Ù†Ø¯Ù„ÛŒ Ø§Ø³Øª** - Ø´Ø±Ø§ÛŒØ· Ø®Ø§ØµÛŒ Ø¯Ø§Ø±Ø¯
3. **Ù…Ù‚Ø¯Ø§Ø± 0.3 ØªØ¹Ø§Ø¯Ù„ Ø®ÙˆØ¨ÛŒ Ø§Ø³Øª** Ø¨ÛŒÙ† Ø¯Ù‚Øª Ùˆ ØªØ¹Ø¯Ø§Ø¯
4. **Ø¨Ø±Ø§ÛŒ Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒ Ø®ÙˆØ¯ ØªØ³Øª Ú©Ù†ÛŒØ¯** - Ù‡Ø± Ø¨Ø§Ø²Ø§Ø± Ù…ØªÙØ§ÙˆØª Ø§Ø³Øª

## ğŸ”„ Ø³Ø§Ø²Ú¯Ø§Ø±ÛŒ Ø¨Ø§ Ú©Ø¯ Ù‚Ø¨Ù„ÛŒ

Ú©Ø¯ Ù‚Ø¨Ù„ÛŒ Ø¨Ø¯ÙˆÙ† ØªØºÛŒÛŒØ± Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ø¯:
```python
# Ø§ÛŒÙ† Ú©Ø¯ Ù‡Ù…Ú†Ù†Ø§Ù† Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ø¯ Ùˆ Ø§Ø² Ù…Ù‚Ø¯Ø§Ø± Ø¬Ø¯ÛŒØ¯ 0.3 Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ø¯
detector = MatHoldPattern()
```

Ø§Ù…Ø§ Ø­Ø§Ù„Ø§ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¢Ù† Ø±Ø§ ØªÙ†Ø¸ÛŒÙ… Ú©Ù†ÛŒØ¯:
```python
# ØªÙ†Ø¸ÛŒÙ… Ø¯Ù„Ø®ÙˆØ§Ù‡
detector = MatHoldPattern(penetration=0.25)
```

## ğŸ”„ Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒâ€ŒÙ‡Ø§

### Ù†Ø³Ø®Ù‡ 1.1.1 (2025-10-27)
- Ø§ØµÙ„Ø§Ø­ `__init__` Ø¨Ø±Ø§ÛŒ Ø³Ø§Ø²Ú¯Ø§Ø±ÛŒ Ø¨Ø§ `BasePattern`
- Ø­Ø§Ù„Ø§ `config` Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù† Ø§ÙˆÙ„ÛŒÙ† Ù¾Ø§Ø±Ø§Ù…ØªØ± Ù¾Ø°ÛŒØ±ÙØªÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯
- Ù‡Ø± Ø³Ù‡ Ø±ÙˆØ´ instantiation Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯:
  1. `MatHoldPattern()` - Ù¾ÛŒØ´â€ŒÙØ±Ø¶
  2. `MatHoldPattern(penetration=0.3)` - Ù…Ø³ØªÙ‚ÛŒÙ…
  3. `MatHoldPattern(config={'mat_hold_penetration': 0.3})` - Ø§Ø² Ø·Ø±ÛŒÙ‚ config

---

**Ù†ÙˆÛŒØ³Ù†Ø¯Ù‡**: Claude Code
**ØªØ§Ø±ÛŒØ®**: 2025-10-27
**Ù†Ø³Ø®Ù‡ Ø±Ø§Ù‡Ù†Ù…Ø§**: 1.1
