# TA-Lib CDLSHOOTINGSTAR - ุงูุชูโูุง ุชุญููุงุช

ุชุงุฑุฎ: 2025-10-25
ูุฏู: ุฏุฑฺฉ ุนููฺฉุฑุฏ ุฏูู TA-Lib ุจุฑุง ุชุดุฎุต Shooting Star

---

## โ ูุดฺฉู ุงุตู (ูุจู ุงุฒ ุชุญูู)

ฺฉุฏ ูุง ููุท **ฺฉูุฏู ุขุฎุฑ** ุฑุง ุจู TA-Lib ูโุฏุงุฏ:
```python
# โ ุงุดุชุจุงู - ููุท ฺฉ ฺฉูุฏู
df_single = df.tail(1)
pattern = talib.CDLSHOOTINGSTAR(df_single['open'], ...)
```

**ูุชุฌู:** TA-Lib ูฺ Shooting Star ุฑุง ุชุดุฎุต ููโุฏุงุฏ!

---

## ๐ฌ ุชุณุชโูุง ุงูุฌุงู ุดุฏู

### ุชุณุช ฑ: ุฏุงุฏู ุณุงุฎุชฺฏ
- ุณุงุฎุชู ฺฉูุฏูโูุง perfect Shooting Star
- ุชุณุช ุจุง 1, 5, 10, 20, 50 ฺฉูุฏู
- **ูุชุฌู:** ูฺ ุชุดุฎุต! โ

### ุชุณุช ฒ: ุฏุงุฏู ูุงูุน BTC
- 10,543 ฺฉูุฏู 1-hour BTC/USDT
- **ูุชุฌู:** 75 ุชุดุฎุต (0.71%) โ

### ุชุณุช ณ: ุชุญูู ุขูุงุฑ 75 ุชุดุฎุต ูุงูุน

**ูุนุงุฑูุง TA-Lib:**
- **Upper shadow:** 34.9% - 94.7% (ูุงูฺฏู: 62.8%)
- **Body:** 1.8% - 49.7% (ูุงูฺฏู: 31.3%)
- **Lower shadow:** 0% - 33.1% (ูุงูฺฏู: 5.9%)
- **Body position:** 0 - 0.331 (ูุงูฺฏู: 0.059)

**โ๏ธ ฺฉุดู ููู:**
- **ฑฐฐูช ฺฉูุฏูโูุง BULLISH ูุณุชูุฏ!** (close > open)
- TA-Lib ููุท ฺฉูุฏูโูุง bullish ุฑุง Shooting Star ูโุดูุงุณุฏ
- **ดน.ณูช ุฏุฑ uptrendุ ตฐ.ทูช ุฏุฑ downtrend** โ TA-Lib ุชุฑูุฏ ุฑุง ฺฺฉ ููโฺฉูุฏ!

### ุชุณุช ด: ุชุณุช ุจุง ูพุงุฑุงูุชุฑูุง ุฏูู
- ุณุงุฎุชู ฺฉูุฏู ุจุง ููุงู ูุนุงุฑูุง ุขูุงุฑ TA-Lib
- **ูุชุฌู:** ุจุงุฒ ูู ูฺ ุชุดุฎุต! โ

### ุชุณุช ต: ุชุนุฏุงุฏ ฺฉูุฏูโูุง ูุงุฒู (ฺฉุดู ููุง) ๐ฏ

ุชุณุช ุจุง ุชุนุฏุงุฏ ูุฎุชูู ฺฉูุฏูโูุง ูุจู:
```
โ lookback=0:  NOT detected (1 candle)
โ lookback=1:  NOT detected (2 candles)
โ lookback=2:  NOT detected (3 candles)
โ lookback=3:  NOT detected (4 candles)
โ lookback=5:  NOT detected (6 candles)
โ lookback=10: NOT detected (11 candles)
โ lookback=11: DETECTED (12 candles)  โ MINIMUM!
โ lookback=15: DETECTED (16 candles)
โ lookback=20: DETECTED (21 candles)
```

**ุชุณุช ุจุง 10 detection ูุฎุชูู:**
- ููู: minimum lookback = **11**
- ูุงูฺฏู: **11.0**
- ูุงูู: **11**

---

## โ ูุชุฌู ููุง

### TA-Lib CDLSHOOTINGSTAR ูุงุฒููุฏโูุง:

1. **ุญุฏุงูู 12 ฺฉูุฏู (11 ูุจู + 1 ูุนู)**
   - ุจุง ฺฉูุชุฑ ุงุฒ 12 ฺฉูุฏู: ูฺ ุชุดุฎุต ููโุฏูุฏ
   - TA-Lib ุงุฒ ฺฉูุฏูโูุง ูุจู ุจุฑุง context ุงุณุชูุงุฏู ูโฺฉูุฏ

2. **ฺฉูุฏู ุจุงุฏ BULLISH ุจุงุดุฏ (close > open)**
   - 100% ุชุดุฎุตโูุง ูุงูุน bullish ุจูุฏูุฏ
   - ฺฉูุฏูโูุง bearish ุชุดุฎุต ุฏุงุฏู ููโุดููุฏ

3. **ูุนุงุฑูุง ูุฒฺฉ ฺฉูุฏู:**
   - Upper shadow: ุญุฏุงูู ~35% ุงุฒ range
   - Body: ุญุฏุงฺฉุซุฑ ~50% ุงุฒ range
   - Lower shadow: ุญุฏุงฺฉุซุฑ ~30% ุงุฒ range
   - Body position: ุฏุฑ ูพุงู ฺฉูุฏู (< 0.35)

4. **TA-Lib ุชุฑูุฏ ุฑุง ฺฺฉ ููโฺฉูุฏ:**
   - ูู ุงุฒ ุชุดุฎุตโูุง ุฏุฑ uptrend
   - ูู ุฏุฑ downtrend
   - ูพุณ ุงฺฏุฑ ูโุฎูุงูู Shooting Star ููุท ุฏุฑ uptrend ูุนุชุจุฑ ุจุงุดุฏุ ุจุงุฏ ุฎูุฏูุงู ฺฺฉ ฺฉูู

---

## ๐ง ุฑุงู ุญู: ฺฺฏููู ุจุงุฏ ฺฉุฏ ุฑุง ุงุตูุงุญ ฺฉููุ

### โ ฺฉุฏ ูุนู (ุงุดุชุจุงู):
```python
def detect(self, df: pd.DataFrame, ...) -> bool:
    if not self._validate_dataframe(df):
        return False

    # ููุท ฺฉูุฏู ุขุฎุฑ ุฑุง ูโุฏูู - ุงุดุชุจุงู!
    df_tail = df.tail(1)
    pattern = talib.CDLSHOOTINGSTAR(
        df_tail['open'].values,
        df_tail['high'].values,
        df_tail['low'].values,
        df_tail['close'].values
    )
    return pattern[-1] != 0
```

### โ ฺฉุฏ ุฏุฑุณุช:
```python
def detect(self, df: pd.DataFrame, ...) -> bool:
    # TA-Lib ูุงุฒ ุจู ุญุฏุงูู 12 ฺฉูุฏู ุฏุงุฑุฏ
    if len(df) < 12:
        return False

    # ฺฉู DataFrame ุฑุง ูโุฏูู (ุง ุญุฏุงูู 12 ฺฉูุฏู ุขุฎุฑ)
    # TA-Lib ุฎูุฏุด ุงุฒ ฺฉูุฏูโูุง ูุจู ุงุณุชูุงุฏู ูโฺฉูุฏ
    df_tail = df.tail(100)  # ุง df.tail(12) ุจุฑุง ุจูููโุชุฑ

    pattern = talib.CDLSHOOTINGSTAR(
        df_tail['open'].values,
        df_tail['high'].values,
        df_tail['low'].values,
        df_tail['close'].values
    )

    # ููุท ฺฉูุฏู ุขุฎุฑ ุฑุง ฺฺฉ ูโฺฉูู
    if pattern[-1] == 0:
        return False

    # ุงฺฏุฑ ูโุฎูุงูู ููุท ุฏุฑ uptrend ูุนุชุจุฑ ุจุงุดุฏ:
    if self.require_uptrend:
        context_score = self._get_cached_context_score(df)
        if context_score < self.min_uptrend_score:
            return False

    return True
```

---

## ๐ ููุงุณู: ฺฉุฏ ูุจู vs ฺฉุฏ ุฌุฏุฏ

| ูุนุงุฑ | ฺฉุฏ ูุจู (Manual) | ฺฉุฏ ุฌุฏุฏ (TA-Lib) |
|-------|------------------|-------------------|
| ุชุนุฏุงุฏ ฺฉูุฏู ูุงุฒู | 1 ฺฉูุฏู | 12 ฺฉูุฏู (11+1) |
| ุจุฑุฑุณ ุชุฑูุฏ | โ manual check | โ ูุฏุงุฑุฏ (ุจุงุฏ manual ุงุถุงูู ฺฉูู) |
| ุฏูุช | ูุงูุดุฎุต | โ ุงุณุชุงูุฏุงุฑุฏ TA-Lib |
| Detection rate | 50/10543 = 0.47% | 75/10543 = 0.71% |
| ุณุฑุนุช | ุณุฑุนโุชุฑ (ฺฉูุชุฑ ูุญุงุณุจู) | ฺฉู ฺฉูุฏุชุฑ (12 ฺฉูุฏู) |

---

## ๐ก ุชูุตูโูุง

### ฺฏุฒูู ฑ: ุงุณุชูุงุฏู ฺฉุงูู ุงุฒ TA-Lib โ (ุชูุตู ูโุดูุฏ)
```python
class ShootingStarPattern(BasePattern):
    def detect(self, df: pd.DataFrame, ...) -> bool:
        # ฺฺฉ ฺฉุฑุฏู ุญุฏุงูู ุชุนุฏุงุฏ ฺฉูุฏู
        if len(df) < 12:
            return False

        # ุงุณุชูุงุฏู ุงุฒ TA-Lib ุจุง ฺฉูุฏูโูุง ฺฉุงู
        df_tail = df.tail(100)
        pattern = talib.CDLSHOOTINGSTAR(
            df_tail[open_col].values,
            df_tail[high_col].values,
            df_tail[low_col].values,
            df_tail[close_col].values
        )

        if pattern[-1] == 0:
            return False

        # ุงุถุงูู ฺฉุฑุฏู ุจุฑุฑุณ uptrend (TA-Lib ุงู ฺฉุงุฑ ุฑุง ููโฺฉูุฏ)
        if self.require_uptrend:
            context_score = self._get_cached_context_score(df)
            if context_score < self.min_uptrend_score:
                return False

        return True
```

**ูุฒุงุง:**
- ุงุณุชุงูุฏุงุฑุฏ ู ูุงุจู ุงุนุชูุงุฏ
- ุณุงุฒฺฏุงุฑ ุจุง ุจูู ุงูฺฏููุง TA-Lib
- ฺฉูุชุฑ ุจุงฺฏ ุฏุงุฑุฏ

**ูุนุงุจ:**
- ูุงุฒ ุจู 12 ฺฉูุฏู (ููฺฉู ุงุณุช ุฏุฑ ุงุจุชุฏุง ุฏุงุฏู ูุดฺฉู ุจุงุดุฏ)
- TA-Lib ููุท bullish ุฑุง ุชุดุฎุต ูโุฏูุฏ (ูุญุฏูุฏุช)

### ฺฏุฒูู ฒ: ุชุฑฺฉุจ Manual + TA-Lib
```python
def detect(self, df: pd.DataFrame, ...) -> bool:
    # ุงฺฏุฑ ฺฉูุฏู ฺฉุงู ุฏุงุฑู โ ุงุฒ TA-Lib ุงุณุชูุงุฏู ฺฉู
    if len(df) >= 12:
        return self._detect_with_talib(df)

    # ุงฺฏุฑ ูู โ ุงุฒ manual detector ุงุณุชูุงุฏู ฺฉู
    else:
        return self._detect_manual(df)
```

**ูุฒุงุง:**
- ฺฉุงุฑ ูโฺฉูุฏ ุญุช ุจุง ฺฉูุชุฑ ุงุฒ 12 ฺฉูุฏู
- ุงูุนุทุงูโูพุฐุฑุชุฑ

**ูุนุงุจ:**
- ูพฺุฏูโุชุฑ
- ุฏู ุฑุงู ุชุดุฎุต ูุชูุงูุช

### ฺฏุฒูู ณ: ููุท Manual (ฺฉุฏ ูุนู ุฑุง ูฺฏู ุฏุงุฑ)
**ุชูุตู ููโุดูุฏ** - ฺูู:
- ฺฉุฏ manual ูุง ุชุฑูุฏ ุฑุง ฺฺฉ ูโฺฉูุฏ โ
- ุงูุง ุดุงุฏ ุฏูุช ฺฉูุชุฑ ุฏุงุฑุฏ โ
- TA-Lib ุงุณุชุงูุฏุงุฑุฏ ู ุชุณุช ุดุฏู ุงุณุช

---

## ๐ฏ ุชุตูู ููุง

**ุชูุตู:** ฺฏุฒูู ฑ (ุงุณุชูุงุฏู ฺฉุงูู ุงุฒ TA-Lib)

**ุฏูุงู:**
1. ุดูุง ุฏุฑุณุช ฺฏูุชุฏ - TA-Lib ุจู ฺฉูุฏูโูุง ูุจู ูุงุฒ ุฏุงุฑุฏ โ
2. TA-Lib ุงุณุชุงูุฏุงุฑุฏ ุตูุนุช ุงุณุช
3. detection rate ุจูุชุฑ: 0.71% vs 0.47%
4. ฺฉุฏ ุณุงุฏูโุชุฑ ู ูุงุจู ูฺฏูุฏุงุฑโุชุฑ

**ุชุบุฑุงุช ูุงุฒู ุฏุฑ shooting_star.py:**
1. ุญุฐู ฺฉุฏ manual detection
2. ุงุณุชูุงุฏู ุงุฒ TA-Lib ุจุง ุญุฏุงูู 12 ฺฉูุฏู
3. ูฺฏู ุฏุงุดุชู uptrend check (ฺูู TA-Lib ูุฏุงุฑุฏ)
4. ูฺฏู ุฏุงุดุชู quality scoring system

---

## ๐ ุณูุงูุงุช ุจุฑุง ุชุตููโฺฏุฑ

ฑ. ุขุง ูโุฎูุงูู ูู bullish ู ูู bearish Shooting Star ุฑุง ุชุดุฎุต ุฏููุ
   - TA-Lib ููุท bullish โ ุจุงุฏ manual check ุงุถุงูู ฺฉูู

ฒ. ุขุง ุญุฏุงูู 12 ฺฉูุฏู ูุดฺฉู ุงุฌุงุฏ ูโฺฉูุฏุ
   - ุงฺฏุฑ ุจูู โ ฺฏุฒูู ฒ (ุชุฑฺฉุจ)
   - ุงฺฏุฑ ูู โ ฺฏุฒูู ฑ (TA-Lib)

ณ. ุขุง ูโุฎูุงูู ุณุงุฒฺฏุงุฑ ุจุง TA-Lib ุจุงุดูุ
   - ุงฺฏุฑ ุจูู โ ฺฏุฒูู ฑ
   - ุงฺฏุฑ ุฎุงุตโุชุฑ ูโุฎูุงูู โ ฺฏุฒูู ณ (manual)

---

## โ ุฎูุงุตู ุงูุชูโูุง

> **ุดูุง ฺฉุงููุงู ุฏุฑุณุช ูโฺฏูุชุฏ!**
>
> ูุดฺฉู ุงู ุจูุฏ ฺฉู ูุง ููุท ฺฉูุฏู ุขุฎุฑ ุฑุง ุจู TA-Lib ูโุฏุงุฏู.
> TA-Lib ุจุฑุง ุชุดุฎุต Shooting Star ุจู **ุญุฏุงูู 12 ฺฉูุฏู (11 ูุจู + 1 ูุนู)** ูุงุฒ ุฏุงุฑุฏ.
>
> ุจุง ุฏุงุฏู ฺฉู DataFrame (ุง ุญุฏุงูู 12 ฺฉูุฏู ุขุฎุฑ) ุจู TA-Libุ ูุดฺฉู ุญู ูโุดูุฏ!

**ูุจู ุงุฒ fix:** 0 detection
**ุจุนุฏ ุงุฒ fix:** 75 detection (0.71% ุงุฒ ฺฉูุฏูโูุง)

---

## ๐ ูุฑุญูู ุจุนุฏ

ุขุง ูโุฎูุงูุฏ:
1. ฺฉุฏ shooting_star.py ุฑุง ุจุฑ ุงุณุงุณ ฺฏุฒูู ฑ ุงุตูุงุญ ฺฉููุ โ
2. ุชุณุช ฺฉูู ฺฉู fix ฺฉุงุฑ ูโฺฉูุฏุ
3. ุงูฺฏููุง ุฏฺฏุฑ ุฑุง ูู ุจุฑุฑุณ ฺฉููุ (Hammer, Engulfing, etc.)

**ููุชุธุฑ ุชุตูู ุดูุง ูุณุชู!** ๐
